<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ù†ÙˆÙ†Ùˆ Ù…Ø³Ø§Ø¹Ø¯ Ø§ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ù†ÙˆØ± Ù„Ù„Ø¬Ù…Ø¨Ø§Ø²</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
</head>
<body class="bg-gray-100">
    <div id="root"></div>

    <script>
        const { useState, useEffect, useRef } = React;
        
        const App = () => {
            const [messages, setMessages] = useState([
                { id: 1, text: 'Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ! Ø£Ù†Ø§ Ù†ÙˆÙ†Ùˆ Ù…Ø³Ø§Ø¹Ø¯ Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ù†ÙˆØ± Ù„Ù„Ø¬Ù…Ø¨Ø§Ø². Ù†Ù‚Ø¯Ø± Ù†Ø¨Ù‚Ù‰ ØµØ­Ø§Ø¨ Ùˆ Ù†Ø¯Ø±Ø¯Ø´ Ø¨Ø®ØµÙˆØµ Ø§Ù„Ø¬Ù…Ø¨Ø§Ø² Ø¨Ø´ÙƒÙ„ Ø¹Ø§Ù… Ø§Ùˆ Ø¹Ù† Ø§ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ù†ÙˆØ± Ù„Ù„Ø¬Ù…Ø¨Ø§Ø² Ø¨Ø´ÙƒÙ„ Ø®Ø§Øµ.', type: 'bot' }
            ]);
            const [input, setInput] = useState('');
            const [isLoading, setIsLoading] = useState(false);
            
            const findAnswerInKnowledge = (question, knowledgeText) => {
                const lines = knowledgeText.split('\n').filter(line => line.trim() !== '');
                const cleanQuestion = question.toLowerCase()
                    .replace(/\?|\.|ØŒ|,|!|Ø›/g, '')
                    .replace(/\s+/g, ' ')
                    .trim();

                console.log('ğŸ” Ø§Ù„Ø¨Ø­Ø« Ø¹Ù†:', cleanQuestion);

                // Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø¯Ù‚ÙŠÙ‚ ÙÙŠ ÙƒÙ„ Ø³Ø¤Ø§Ù„ ÙˆØ¬ÙˆØ§Ø¨
                for (let i = 0; i < lines.length; i++) {
                    if (lines[i].startsWith('Ø³Ø¤Ø§Ù„:')) {
                        const questionLine = lines[i].replace('Ø³Ø¤Ø§Ù„:', '').trim().toLowerCase();
                        const answerLine = lines[i + 1] ? lines[i + 1].replace('Ø¬ÙˆØ§Ø¨:', '').trim() : '';
                        
                        if (!answerLine) continue;

                        // ØªØ·Ø§Ø¨Ù‚ ÙƒØ§Ù…Ù„ Ø£Ùˆ Ø¬Ø²Ø¦ÙŠ
                        if (cleanQuestion.includes(questionLine) || questionLine.includes(cleanQuestion)) {
                            console.log('âœ… ÙˆØ¬Ø¯ ØªØ·Ø§Ø¨Ù‚ Ù…Ø¨Ø§Ø´Ø±:', questionLine);
                            return answerLine;
                        }

                        // ØªØ·Ø§Ø¨Ù‚ Ø¨Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ©
                        const questionWords = cleanQuestion.split(' ').filter(word => word.length > 2);
                        const knowledgeWords = questionLine.split(' ').filter(word => word.length > 2);
                        
                        const matchingWords = questionWords.filter(word => 
                            knowledgeWords.some(kw => kw.includes(word) || word.includes(kw))
                        );
                        
                        if (matchingWords.length >= 1) {
                            console.log('âœ… ÙˆØ¬Ø¯ ØªØ·Ø§Ø¨Ù‚ Ø¨ÙƒÙ„Ù…Ø§Øª:', matchingWords);
                            return answerLine;
                        }
                    }
                }

                // Ø¥Ø°Ø§ Ù„Ù… ÙŠØ¬Ø¯ Ø¥Ø¬Ø§Ø¨Ø©ØŒ Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ© Ø§Ù„Ø¹Ø§Ù…Ø©
                const keywordAnswers = {
                    'ÙÙˆØ§ÙŠØ¯': 'Ø§Ù„Ø¬Ù…Ø¨Ø§Ø² Ø§Ù„ÙÙ†ÙŠ Ù„Ù„Ø¨Ù†Ø§Øª Ø¨ÙŠØ¨Ù†ÙŠ Ø¬Ø³Ù… Ù‚ÙˆÙŠ ÙˆÙ…Ø±Ù†ØŒ ÙˆØ¨ÙŠØ¹Ù„Ù…Ù‡Ù… Ø§Ù„Ø«Ù‚Ø© ÙÙŠ Ø§Ù„Ù†ÙØ³ ÙˆØ§Ù„Ø§Ù†Ø¶Ø¨Ø§Ø·. Ø¯ÙŠ Ø¨Ø¯Ø§ÙŠØ© Ù…Ù…ØªØ§Ø²Ø© Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ Ø£ÙŠ Ø¨Ø·Ù„Ø©!',
                    'Ø³Ù†': 'Ø¨Ù†Ù‚Ø¨Ù„ Ø§Ù„Ø¨Ù†Ø§Øª Ù…Ù† Ø³Ù† 4 Ø³Ù†ÙŠÙ† Ù„Ø­Ø¯ 14 Ø³Ù†Ø©. Ø§Ù„Ø³Ù† Ø§Ù„Ù…Ø«Ø§Ù„ÙŠ Ù„Ù„Ø¨Ø·ÙˆÙ„Ø§Øª Ù‡Ùˆ Ù…Ù† 4 Ù„Ù€ 10 Ø³Ù†ÙŠÙ†ØŒ ÙˆØ§Ù„Ø£ÙƒØ¨Ø± Ù…Ù† ÙƒØ¯Ù‡ Ø¨ÙŠØ³ØªÙÙŠØ¯ÙˆØ§ Ù…Ù† Ø§Ù„Ù„ÙŠØ§Ù‚Ø© ÙˆØ§Ù„Ù‚ÙˆØ©.',
                    'Ù…ÙˆØ§Ø¹ÙŠØ¯': 'Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø­Ø© Ù‡ÙŠ Ø§Ù„Ø£Ø­Ø¯ØŒ Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡ØŒ ÙˆØ§Ù„Ø®Ù…ÙŠØ³ØŒ Ø¨ØªØ®ØªØ§Ø±ÙŠ Ù…Ù†Ù‡Ù… ÙŠÙˆÙ…ÙŠÙ†. Ø§Ù„ØªÙ…Ø±ÙŠÙ† Ø¨ÙŠÙƒÙˆÙ† Ù…Ù† 6 Ù…Ø³Ø§Ø¡Ù‹ Ù„Ù€ 8 Ù…Ø³Ø§Ø¡Ù‹.',
                    'ØªÙƒÙ„ÙØ©': 'Ø¹Ù†Ø¯Ù†Ø§ Ø¨Ø§Ù‚ØªÙŠÙ†: Ø¨Ø§Ù‚Ø© ØªØ±ÙÙŠÙ‡ÙŠØ© (8 Ø­ØµØµ Ø¨Ù€ 300 Ø¬Ù†ÙŠÙ‡) ÙˆØ¨Ø§Ù‚Ø© Ø§Ù„Ø¨Ø·Ù„ (12 Ø­ØµØ© Ø¨Ù€ 400 Ø¬Ù†ÙŠÙ‡). Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ Ø´Ù‡Ø±ÙŠ ÙˆØ§Ù„Ø­ØµØµ Ù„Ø§ ØªØ±Ø­Ù„.',
                    'Ù„Ø¨Ø³': 'ÙÙŠ Ø£ÙˆÙ„ Ø­ØµØ©ØŒ Ø£ÙŠ Ù„Ø¨Ø³ Ø±ÙŠØ§Ø¶ÙŠ Ù…Ø±ÙŠØ­ Ù…Ù†Ø§Ø³Ø¨. Ø¨Ø¹Ø¯ ÙƒØ¯Ù‡ Ø¨ÙŠÙƒÙˆÙ† ÙÙŠÙ‡ Ø²ÙŠ Ù…ÙˆØ­Ø¯ Ù„Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© ØªÙŠØ´ÙŠØ±Øª Ø³Ø¹Ø±Ù‡ 250 Ø¬Ù†ÙŠÙ‡.',
                    'Ø­ØµØµ ØªØ¬Ø±ÙŠØ¨ÙŠØ©': 'Ø£ÙƒÙŠØ¯ØŒ Ø£ÙˆÙ„ Ø­ØµØ© Ø¨ØªÙƒÙˆÙ† ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ø¹Ø´Ø§Ù† Ù†Ù‚ÙŠÙ… Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù„Ø§Ø¹Ø¨Ø© ÙˆÙ†ØªØ¹Ø±Ù Ø¹Ù„ÙŠÙ‡Ø§.',
                    'Ù…Ø¯Ø±Ø¨ÙŠÙ†': 'Ø§Ù„Ù…Ø¯Ø±Ø¨Ø© Ù‡ÙŠ ÙƒØ§Ø¨ØªÙ† Ù†ÙˆØ±ØŒ Ù…Ø¯Ø±Ø¨Ø© Ù…Ø¹ØªÙ…Ø¯Ø© Ù…Ù† Ø§Ù„Ø§ØªØ­Ø§Ø¯ Ø§Ù„Ù…ØµØ±ÙŠ Ù„Ù„Ø¬Ù…Ø¨Ø§Ø² ÙˆØ®Ø¨Ø±Ø© ÙÙŠ ØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ø¨Ù†Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ù…Ø¨Ø§Ø² Ø§Ù„ÙÙ†ÙŠ.',
                    'Ø¢Ù…Ù†Ø©': 'Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨Ø§Øª Ø£ÙˆÙ„ÙˆÙŠØªÙ†Ø§. Ø§Ù„ØµØ§Ù„Ø© Ù…Ø¬Ù‡Ø²Ø© Ø¨Ø£Ø­Ø¯Ø« Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø£Ù…Ø§Ù†ØŒ Ù…Ù† Ø£Ø±Ø¶ÙŠØ§Øª Ù…Ø¨Ø·Ù†Ø© ÙˆØ£Ø¬Ù‡Ø²Ø© Ù…Ø¹ØªÙ…Ø¯Ø©.',
                    'Ø´Ù‡Ø§Ø¯Ø§Øª': 'ÙƒØ§Ø¨ØªÙ† Ù†ÙˆØ± Ù…Ø¹Ù‡Ø§ Ø´Ù‡Ø§Ø¯Ø© Ù…Ø¯Ø±Ø¨ Ù…Ø¹ØªÙ…Ø¯ Ù…Ù† Ù…Ù†Ø¸Ù…Ø© Insep pro Ùˆ Ø¯ÙˆØ±Ø© Ø§Ø¹Ø¯Ø§Ø¯ Ù…Ø¯Ø±Ø¨ÙŠÙ† Ø¬Ù…Ø¨Ø§Ø² ÙÙ†Ù‰ Ù…Ù† Ø§Ù„Ø§ØªØ­Ø§Ø¯ Ø§Ù„Ù…ØµØ±Ù‰ Ù„Ù„Ø¬Ù…Ø¨Ø§Ø².',
                    'Ø¨Ø·ÙˆÙ„Ø§Øª': 'Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ù†ÙˆØ± Ø¨ØªØ´Ø§Ø±Ùƒ Ø¯Ø§ÙŠÙ…Ø§Ù‹ ÙÙŠ Ø¨Ø·ÙˆÙ„Ø§Øª Ø§Ù„Ø¬Ù…Ù‡ÙˆØ±ÙŠØ© ÙˆØ§Ù„Ù…Ù†Ø§Ø·Ù‚ØŒ ÙˆØ¨Ø·Ù„Ø§ØªÙ†Ø§ Ø¨ÙŠØ­Ù‚Ù‚ÙˆØ§ Ù…Ø±Ø§ÙƒØ² Ù…ØªÙ‚Ø¯Ù…Ø© Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡.',
                    'Ø±Ø§Ø¨Ø·': 'Ø¯ÙˆØ³ Ø¹Ù„Ù‰ Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù„ÙŠ Ù‡ØªÙ„Ø§Ù‚ÙŠÙ‡Ø§ ÙÙˆÙ‚ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ù…Ø§Ù„ØŒ Ø§Ù„Ø±Ø§Ø¨Ø· Ù‡ÙŠØªÙ†Ø³Ø® ÙˆØªÙ‚Ø¯Ø± ØªØ¨Ø¹ØªÙ‡ Ù„Ø£ÙŠ Ø­Ø¯.',
                    'Ø¥Ù„ØºØ§Ø¡': 'Ù„Ù„Ø§Ø³Ù Ù„Ø§ Ù…ÙÙŠØ´ Ø§Ù‰ Ø³Ø¨Ø¨ ØªÙ‚Ø¯Ø± ØªØ³ØªØ±Ø¯ Ø¨ÙŠÙ‡ Ø§Ù„Ù…Ø¨Ù„Øº Ù…Ù† Ø§Ù„Ø§ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø¨Ø³Ø¨Ø¨ Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ø­Ø³Ø§Ø¨ÙŠØ© ÙˆØ§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©.'
                };

                for (const [keyword, answer] of Object.entries(keywordAnswers)) {
                    if (cleanQuestion.includes(keyword)) {
                        console.log('âœ… ÙˆØ¬Ø¯ ØªØ·Ø§Ø¨Ù‚ Ø¨ÙƒÙ„Ù…Ø© Ù…ÙØªØ§Ø­ÙŠØ©:', keyword);
                        return answer;
                    }
                }

                return "Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù„Ù… Ø£Ø¬Ø¯ Ø¥Ø¬Ø§Ø¨Ø© Ø¯Ù‚ÙŠÙ‚Ø© Ù„Ø³Ø¤Ø§Ù„Ùƒ. ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø¹Ù†: ÙÙˆØ§ÙŠØ¯ Ø§Ù„Ø¬Ù…Ø¨Ø§Ø²ØŒ Ø§Ù„Ø³Ù† Ø§Ù„Ù…Ù†Ø§Ø³Ø¨ØŒ Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ØŒ Ø§Ù„ØªÙƒÙ„ÙØ©ØŒ Ø§Ù„Ù„Ø¨Ø³ØŒ Ø§Ù„Ø­ØµØµ Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©ØŒ Ø§Ù„Ù…Ø¯Ø±Ø¨ÙŠÙ†ØŒ Ø£Ùˆ Ø§Ù„Ø¨Ø·ÙˆÙ„Ø§Øª.";
            };

            const handleSubmit = (e) => {
                e.preventDefault();
                if (!input.trim()) return;
                
                setMessages(prev => [...prev, { id: Date.now(), text: input, type: 'user' }]);
                const currentInput = input;
                setInput('');
                setIsLoading(true);

                fetch('./knowledge.txt')
                    .then(response => {
                        if (!response.ok) throw new Error('Ø§Ù„Ù…Ù„Ù ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');
                        return response.text();
                    })
                    .then(knowledgeText => {
                        console.log('ğŸ“ ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø¨Ù†Ø¬Ø§Ø­');
                        const answer = findAnswerInKnowledge(currentInput, knowledgeText);
                        setMessages(prev => [...prev, { id: Date.now() + 1, text: answer, type: 'bot' }]);
                    })
                    .catch(error => {
                        console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù:', error);
                        setMessages(prev => [...prev, { id: Date.now() + 1, text: 'Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ù…Ø¹Ø±ÙØ©.', type: 'bot' }]);
                    })
                    .finally(() => {
                        setIsLoading(false);
                    });
            };

            return React.createElement('div', { className: 'h-screen flex flex-col' },
                [
                    React.createElement('header', { 
                        key: 'header',
                        className: 'bg-purple-600 text-white p-4 text-center'
                    }, 'Ù†ÙˆÙ†Ùˆ - Ù…Ø³Ø§Ø¹Ø¯ Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ù†ÙˆØ± Ù„Ù„Ø¬Ù…Ø¨Ø§Ø²'),
                    
                    React.createElement('main', {
                        key: 'main',
                        className: 'flex-1 p-4 overflow-y-auto'
                    }, 
                        messages.map(msg => 
                            React.createElement('div', {
                                key: msg.id,
                                className: `p-4 my-2 rounded-lg max-w-md ${
                                    msg.type === 'user' 
                                        ? 'bg-blue-500 text-white ml-auto' 
                                        : 'bg-white text-gray-800 mr-auto border border-gray-200 shadow-sm'
                                }`
                            }, msg.text)
                        ).concat(
                            isLoading ? React.createElement('div', {
                                key: 'loading',
                                className: 'p-3 my-2 bg-gray-100 rounded-lg mr-auto max-w-md text-center text-gray-600'
                            }, 'ğŸ” Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ù…Ø¹Ø±ÙØ©...') : null
                        )
                    ),
                    
                    React.createElement('footer', {
                        key: 'footer', 
                        className: 'p-4 border-t bg-white'
                    }, 
                        React.createElement('form', { onSubmit: handleSubmit, className: 'flex gap-2' },
                            [
                                React.createElement('input', {
                                    key: 'input',
                                    type: 'text',
                                    value: input,
                                    onChange: (e) => setInput(e.target.value),
                                    placeholder: 'Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ù‡Ù†Ø§...',
                                    className: 'flex-1 p-3 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-purple-500'
                                }),
                                React.createElement('button', {
                                    key: 'button',
                                    type: 'submit',
                                    disabled: isLoading,
                                    className: `px-6 py-3 rounded-full font-medium transition-colors ${
                                        isLoading 
                                            ? 'bg-gray-400 text-gray-200 cursor-not-allowed' 
                                            : 'bg-purple-600 text-white hover:bg-purple-700'
                                    }`
                                }, isLoading ? '...' : 'Ø¥Ø±Ø³Ø§Ù„')
                            ]
                        )
                    )
                ]
            );
        };

        ReactDOM.createRoot(document.getElementById('root')).render(React.createElement(App));
    </script>
</body>
</html>
