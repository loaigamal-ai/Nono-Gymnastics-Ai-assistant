<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ù†ÙˆÙ†Ùˆ Ù…Ø³Ø§Ø¹Ø¯ Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ù†ÙˆØ± Ù„Ù„Ø¬Ù…Ø¨Ø§Ø²</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
</head>
<body class="bg-gray-100">
    <div id="root"></div>

    <script>
        const { useState, useEffect, useRef } = React;
        
        const App = () => {
            const [messages, setMessages] = useState([
                { id: 1, text: 'Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ! Ø£Ù†Ø§ Ù†ÙˆÙ†ÙˆØŒ Ù…Ø³Ø§Ø¹Ø¯Ùƒ ÙÙŠ Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ù†ÙˆØ± Ù„Ù„Ø¬Ù…Ø¨Ø§Ø².Ù†Ù‚Ø¯Ø± Ù†Ø¯Ø±Ø¯Ø´ Ù…Ø¹ Ø¨Ø¹Ø¶ ÙÙ‰ Ø§Ù‰ Ø­Ø§Ø¬Ø© Ø¨Ø®ØµÙˆØµ Ø§Ù„Ø¬Ù…Ø¨Ø§Ø² Ø¨Ø´ÙƒÙ„ Ø¹Ø§Ù… Ùˆ Ø¨Ø®ØµÙˆØµ Ø§ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ù†ÙˆØ± Ù„Ù„Ø¬Ù…Ø¨Ø§Ø² Ø¨Ø´ÙƒÙ„ Ø®Ø§Øµ. Ù‚ÙˆÙ„Ù‰ Ø­Ø§Ø¨Ø¨ Ø§Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ø²Ø§Ù‰ØŸ! ğŸ†', type: 'bot' }
            ]);
            const [input, setInput] = useState('');
            const [isLoading, setIsLoading] = useState(false);
            const [knowledgeData, setKnowledgeData] = useState('');
            
            const GEMINI_API_KEY = "AIzaSyCENKrIphUGX_bA7XgcqqInVc_ZhkA3TY";

            useEffect(() => {
                fetch('./knowledge.txt')
                    .then(response => response.text())
                    .then(data => {
                        setKnowledgeData(data);
                        console.log('âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ knowledge.txt');
                    })
                    .catch(error => {
                        console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ knowledge.txt:', error);
                    });
            }, []);

            const handleSubmit = async (e) => {
                e.preventDefault();
                if (!input.trim()) return;
                
                setMessages(prev => [...prev, { id: Date.now(), text: input, type: 'user' }]);
                const currentInput = input;
                setInput('');
                setIsLoading(true);

                try {
                    // Ø§Ù„Ø¨Ø±ÙˆÙ…Ø¨Øª Ø§Ù„Ø°ÙƒÙŠ - ÙŠÙÙ‡Ù… Ø§Ù„Ù†ÙŠØ© Ù…Ù† Ø£ÙŠ ØµÙŠØ§ØºØ©
                    const prompt = `You are "Nono", an AI assistant created to answer gymnastics-related questions for "Nour Gymnastics Academy".

STYLE & TONE:
- Speak in Arabic Egyptian dialect.
- Sound like a former artistic gymnast with strong experience and a current professional artistic gymnastics coach.
- Be friendly, supportive, encouraging, and knowledgeable.
- Provide clear, safe, practical advice for parents, kids, and new athletes.
- Never give medical diagnoses. If asked, advise to check a medical professional.
- Never answer outside gymnastics, sports education, child development, or academy-related topics.

ROLE:
Your job is to answer the clientâ€™s question clearly and professionally as a gymnastics expert.

ACADEMY CONTEXT:
- Noor Academy is a specialized academy offering artistic gymnastics training for children.
- Focus on discipline, safety, talent development, fun, and building confidence.
- We help kids discover their abilities and progress step-by-step.

YOUR TASK:
Answer the following client question in the best helpful way:

QUESTION: {{user_message}}

## Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø±Ø³Ù…ÙŠØ© Ù…Ù† Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ©:
${knowledgeData}

## Ø§Ù„Ù…Ù‡Ù…Ø©:
- Ø¥ÙÙ‡Ù… Ù†ÙŠØ© Ø§Ù„Ø³Ø¤Ø§Ù„ Ù…Ù† Ø£ÙŠ ØµÙŠØ§ØºØ©
- Ø¥Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø£Ø¹Ù„Ø§Ù‡ Ù„Ù„Ø¥Ø¬Ø§Ø¨Ø©
- Ø¥Ø¬Ø¨ Ø¨Ø§Ù„Ù„Ù‡Ø¬Ø© Ø§Ù„Ù…ØµØ±ÙŠØ©
- ÙƒÙ† Ù…Ø¯Ø±Ø¨ Ø¬Ù…Ø¨Ø§Ø² Ù…Ø­ØªØ±Ù ÙˆÙˆØ¯ÙˆØ¯

## Ø§Ù„Ø³Ø¤Ø§Ù„: 
"${currentInput}"

## ØªÙˆØ¬ÙŠÙ‡Ø§Øª:
- Ù„Ùˆ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø¹Ù† Ø£Ø³Ø¹Ø§Ø±/ØªÙƒØ§Ù„ÙŠÙ/Ø¨ÙƒØ§Ù… â†’ Ø¬Ø§ÙˆØ¨ Ø¨Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø¨Ø§Ù‚Ø§Øª
- Ù„Ùˆ Ø¹Ù† Ù…ÙˆØ§Ø¹ÙŠØ¯/Ø§ÙˆÙ‚Ø§Øª/Ø§Ù…ØªÙ‰ â†’ Ø¬Ø§ÙˆØ¨ Ø¨Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ø£Ø­Ø¯ØŒ Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡ØŒ Ø§Ù„Ø®Ù…ÙŠØ³
- Ù„Ùˆ Ø¹Ù† Ø³Ù†/Ø¹Ù…Ø±/ÙƒÙ… Ø³Ù†Ø© â†’ Ø¬Ø§ÙˆØ¨ Ø¨Ø§Ù„Ø£Ø¹Ù…Ø§Ø± Ù…Ù† 4 Ù„Ù€ 14 Ø³Ù†Ø©
- Ù„Ùˆ Ø¹Ù† Ù„Ø¨Ø³/Ù…Ù„Ø§Ø¨Ø³/Ø²ÙŠ â†’ Ø¬Ø§ÙˆØ¨ Ø¹Ù† Ø§Ù„Ù„Ø¨Ø³ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠ ÙˆØ§Ù„Ø²ÙŠ Ø§Ù„Ù…ÙˆØ­Ø¯
- Ù„Ùˆ Ø¹Ù† Ù…Ø¯Ø±Ø¨/Ù…Ø¯Ø±Ø¨Ø©/ÙƒÙˆØªØ´ â†’ Ø¬Ø§ÙˆØ¨ Ø¹Ù† ÙƒØ§Ø¨ØªÙ† Ù†ÙˆØ±
- Ù„Ùˆ Ø¹Ù† Ø­ØµØ© ØªØ¬Ø±ÙŠØ¨ÙŠØ©/ØªØ¬Ø±Ø¨Ø© â†’ Ø¬Ø§ÙˆØ¨ Ø¹Ù† Ø§Ù„Ø­ØµØ© Ø§Ù„Ø£ÙˆÙ„Ù‰ Ù…Ø¬Ø§Ù†ÙŠØ©
- Ù„Ùˆ Ø¹Ù† Ø¹Ù†ÙˆØ§Ù†/Ù…ÙƒØ§Ù†/ÙÙŠÙ† â†’ Ø¬Ø§ÙˆØ¨ Ø¨Ø§Ù„Ù…ÙƒØ§Ù†
- Ù„Ùˆ Ø¹Ù† Ø£Ù…Ø§Ù†/Ø³Ù„Ø§Ù…Ø© â†’ Ø¬Ø§ÙˆØ¨ Ø¹Ù† Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø£Ù…Ø§Ù†
- Ù„Ùˆ Ø¹Ù† Ø¨Ø·ÙˆÙ„Ø§Øª/Ù…Ø³Ø§Ø¨Ù‚Ø§Øª â†’ Ø¬Ø§ÙˆØ¨ Ø¹Ù† Ù…Ø´Ø§Ø±ÙƒØ§Øª Ø§Ù„Ø¨Ø·ÙˆÙ„Ø§Øª

Ø¥Ø¬Ø¨ ÙƒØ£Ù†Ùƒ Ù…Ø¯Ø±Ø¨ Ø¬Ù…Ø¨Ø§Ø² Ù…Ø­ØªØ±Ù:`;

                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${AIzaSyCENKrIphUGJX_gA7XgcqqInVc_ZhkA3TY}`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            contents: [{
                                parts: [{
                                    text: prompt
                                }]
                            }]
                        })
                    });

                    const data = await response.json();
                    
                    if (data.candidates && data.candidates[0]) {
                        const botResponse = data.candidates[0].content.parts[0].text;
                        setMessages(prev => [...prev, { id: Date.now() + 1, text: botResponse, type: 'bot' }]);
                    } else {
                        throw new Error('No response from Gemini');
                    }
                    
                } catch (error) {
                    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Gemini:', error);
                    setMessages(prev => [...prev, { id: Date.now() + 1, text: 'Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ØªÙ‚Ù†ÙŠ. Ø¬Ø±Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.', type: 'bot' }]);
                } finally {
                    setIsLoading(false);
                }
            };

            return React.createElement('div', { className: 'h-screen flex flex-col' },
                [
                    React.createElement('header', { 
                        key: 'header',
                        className: 'bg-gradient-to-r from-purple-600 to-indigo-700 text-white p-4 text-center shadow-lg'
                    }, 
                        'Ù†ÙˆÙ†Ùˆ - Ù…Ø³Ø§Ø¹Ø¯ Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ù†ÙˆØ± Ù„Ù„Ø¬Ù…Ø¨Ø§Ø² ğŸ†'
                    ),
                    
                    React.createElement('main', {
                        key: 'main',
                        className: 'flex-1 p-4 overflow-y-auto'
                    }, 
                        messages.map(msg => 
                            React.createElement('div', {
                                key: msg.id,
                                className: `p-4 my-3 rounded-2xl max-w-md ${
                                    msg.type === 'user' 
                                        ? 'bg-blue-500 text-white ml-auto' 
                                        : 'bg-white text-gray-800 mr-auto border border-purple-200 shadow-sm'
                                }`
                            }, msg.text)
                        ).concat(
                            isLoading ? React.createElement('div', {
                                key: 'loading',
                                className: 'p-3 my-2 bg-purple-100 rounded-lg mr-auto max-w-md text-center text-purple-700'
                            }, 'ğŸ¤” Ø¬Ø§Ø±ÙŠ ÙÙ‡Ù… Ø³Ø¤Ø§Ù„Ùƒ...') : null
                        )
                    ),
                    
                    React.createElement('footer', {
                        key: 'footer', 
                        className: 'p-4 border-t bg-white'
                    }, 
                        React.createElement('form', { onSubmit: handleSubmit, className: 'flex gap-2' },
                            [
                                React.createElement('input', {
                                    key: 'input',
                                    type: 'text',
                                    value: input,
                                    onChange: (e) => setInput(e.target.value),
                                    placeholder: 'Ø§Ø³Ø£Ù„ Ø¨Ø£ÙŠ Ø·Ø±ÙŠÙ‚Ø©... ÙƒÙ… Ø§Ù„Ø³Ø¹Ø±ØŸ Ø§ÙŠÙ‡ Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ØŸ ÙÙŠÙ† Ø§Ù„Ø¹Ù†ÙˆØ§Ù†ØŸ',
                                    className: 'flex-1 p-3 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-purple-500'
                                }),
                                React.createElement('button', {
                                    key: 'button',
                                    type: 'submit',
                                    disabled: isLoading,
                                    className: `px-6 py-3 rounded-full font-medium ${
                                        isLoading 
                                            ? 'bg-gray-400 text-gray-200 cursor-not-allowed' 
                                            : 'bg-purple-600 text-white hover:bg-purple-700'
                                    }`
                                }, isLoading ? '...' : 'Ø¥Ø±Ø³Ø§Ù„')
                            ]
                        )
                    )
                ]
            );
        };

        ReactDOM.createRoot(document.getElementById('root')).render(React.createElement(App));
    </script>
</body>
</html>
