const handleSubmit = (e) => {
    e.preventDefault();
    if (!input.trim()) return;
    
    // إضافة رسالة المستخدم
    setMessages(prev => [...prev, 
        { id: Date.now(), text: input, type: 'user' }
    ]);
    
    const currentInput = input;
    setInput('');
    setIsLoading(true);

    // البحث في knowledge.txt (في المسار الرئيسي)
    fetch('./knowledge.txt')
        .then(response => {
            if (!response.ok) throw new Error('File not found');
            return response.text();
        })
        .then(knowledgeText => {
            const answer = findAnswerInKnowledge(currentInput, knowledgeText);
            setMessages(prev => [...prev, 
                { id: Date.now() + 1, text: answer, type: 'bot' }
            ]);
        })
        .catch(error => {
            setMessages(prev => [...prev, 
                { id: Date.now() + 1, text: 'عذراً، لم أتمكن من الوصول لقاعدة المعرفة.', type: 'bot' }
            ]);
        })
        .finally(() => {
            setIsLoading(false);
        });
};
